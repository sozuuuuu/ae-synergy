<div class="max-w-4xl mx-auto">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-4xl font-bold text-gray-900">
      <%= @draft.synergy? ? 'シナジー編集' : 'パーティー編成編集' %>
      <span class="text-sm text-gray-500 font-normal ml-2">(下書き)</span>
    </h1>
    <%= button_to "公開する", publish_draft_party_post_path(@draft), method: :post, class: "bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded font-semibold" %>
  </div>

  <%= render 'draft_form', draft: @draft %>

  <% if @draft.characters.any? %>
    <div class="bg-white rounded-lg shadow-md p-6 mt-6">
      <h2 class="text-2xl font-semibold mb-4 text-gray-900">この<%= @draft.synergy? ? 'シナジー' : 'パーティ' %>の能力</h2>
      <p class="text-sm text-gray-600 mb-4">緑色のタグはこの<%= @draft.synergy? ? 'シナジー' : 'パーティ' %>が持っている能力です</p>

      <% draft_ability_tag_ids = @draft.all_ability_tags.map(&:id) %>
      <% @all_ability_tags_by_category.each do |category, tags| %>
        <div class="mb-4 last:mb-0">
          <h3 class="text-sm font-semibold text-gray-700 mb-2"><%= category %></h3>
          <div class="flex flex-wrap gap-2">
            <% tags.each do |tag| %>
              <% if draft_ability_tag_ids.include?(tag.id) %>
                <span class="inline-block bg-green-100 text-green-800 px-3 py-1 rounded text-sm"><%= tag.name %></span>
              <% else %>
                <span class="inline-block bg-gray-100 text-gray-400 px-3 py-1 rounded text-sm"><%= tag.name %></span>
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
