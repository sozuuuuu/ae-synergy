<% commentable_type = commentable.class.name.underscore %>

<div class="bg-white rounded-lg shadow-md p-6 mb-6">
  <h2 class="text-2xl font-semibold mb-4 text-gray-900">
    コメント
    <span class="text-lg text-gray-600">(<%= commentable.comments.count %>)</span>
  </h2>

  <div id="comments_<%= commentable_type %>_<%= commentable.id %>" class="space-y-4 mb-6">
    <% if commentable.comments.any? %>
      <%= render commentable.comments %>
    <% else %>
      <p class="text-gray-500 text-center py-4">まだコメントがありません</p>
    <% end %>
  </div>

  <% if logged_in? %>
    <%= render 'comments/form', commentable: commentable %>
  <% else %>
    <div class="bg-gray-50 rounded-lg p-4 text-center">
      <p class="text-gray-600">
        コメントを投稿するには
        <%= link_to "ログイン", login_path, class: "text-indigo-600 hover:text-indigo-800 font-semibold" %>
        してください
      </p>
    </div>
  <% end %>
</div>
